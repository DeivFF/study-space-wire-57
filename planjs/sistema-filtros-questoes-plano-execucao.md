# Plano de Execu√ß√£o: Sistema de Filtros de Quest√µes

## üìã Vis√£o Geral do Projeto

Este documento define o plano completo para implementar um sistema avan√ßado de filtros de quest√µes no Study Space, incluindo quest√µes do ENEM, OAB e Concursos com m√∫ltiplos crit√©rios de filtragem.

## üéØ Objetivos

- Implementar sistema de filtros hier√°rquicos (ENEM, OAB, Concursos)
- Criar estrutura de banco de dados robusta para quest√µes compartilhadas
- Desenvolver API RESTful para gerenciamento de quest√µes
- Construir interface responsiva com filtros din√¢micos
- Implementar sistema de estat√≠sticas de erro personalizado

## üßë‚Äçüíª Agentes Envolvidos

### 1. **Database Engineer** üìä

- **Responsabilidade**: Schema, migrations, otimiza√ß√£o de queries
- **Arquivos**: `agents/database-engineer.md`
- **Fases**: Fase 1 (Design do banco), Fase 2 (Otimiza√ß√µes)

### 2. **Backend Developer** üîß

- **Responsabilidade**: APIs REST, valida√ß√µes, l√≥gica de neg√≥cio
- **Arquivos**: `agents/backend-developer.md`
- **Fases**: Fase 2 (APIs), Fase 3 (Integra√ß√µes)

### 3. **Frontend Developer** ‚öõÔ∏è

- **Responsabilidade**: Interface, filtros din√¢micos, experi√™ncia do usu√°rio
- **Arquivos**: `agents/frontend-developer.md`
- **Fases**: Fase 3 (UI/UX), Fase 4 (Otimiza√ß√µes)

### 4. **QA Engineer** üß™

- **Responsabilidade**: Testes automatizados, valida√ß√£o de funcionalidades
- **Arquivos**: `agents/qa-engineer.md`
- **Fases**: Fase 4 (Testes)

## üèóÔ∏è Arquitetura do Sistema

### Estrutura de Dados

```sql
-- Tabela principal de quest√µes
CREATE TABLE questions (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  category VARCHAR(20) NOT NULL, -- 'ENEM', 'OAB', 'CONCURSO'
  subcategory VARCHAR(100), -- 'CNU', 'PRIMEIRA_FASE', etc
  title TEXT NOT NULL,
  content TEXT NOT NULL,
  type VARCHAR(20) NOT NULL, -- 'OBJETIVA', 'DISCURSIVA', 'PECA_PRATICA'
  year INTEGER NOT NULL,
  difficulty VARCHAR(20), -- 'FACIL', 'MEDIO', 'DIFICIL'
  subject_area VARCHAR(100), -- √Årea do conhecimento
  legal_branch VARCHAR(100), -- Para OAB: ramo do direito
  exam_phase VARCHAR(20), -- Para OAB: 'PRIMEIRA', 'SEGUNDA'
  institution VARCHAR(100), -- √ìrg√£o/banca
  position VARCHAR(100), -- Cargo para concursos
  education_level VARCHAR(20), -- 'MEDIO', 'SUPERIOR'
  metadata JSONB DEFAULT '{}', -- Dados espec√≠ficos flex√≠veis
  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- Alternativas para quest√µes objetivas
CREATE TABLE question_options (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  question_id UUID REFERENCES questions(id) ON DELETE CASCADE,
  option_letter CHAR(1) NOT NULL, -- A, B, C, D, E
  content TEXT NOT NULL,
  is_correct BOOLEAN DEFAULT false,
  explanation TEXT
);

-- Estat√≠sticas de resposta por usu√°rio
CREATE TABLE user_question_stats (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  user_id UUID REFERENCES users(id) ON DELETE CASCADE,
  question_id UUID REFERENCES questions(id) ON DELETE CASCADE,
  is_correct BOOLEAN NOT NULL,
  answered_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  time_spent_seconds INTEGER,
  UNIQUE(user_id, question_id)
);

-- Quest√µes favoritadas
CREATE TABLE user_favorite_questions (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  user_id UUID REFERENCES users(id) ON DELETE CASCADE,
  question_id UUID REFERENCES questions(id) ON DELETE CASCADE,
  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  UNIQUE(user_id, question_id)
);
```

### API Endpoints

```typescript
// GET /api/questions - Listar quest√µes com filtros
interface QuestionFilters {
  category: "ENEM" | "OAB" | "CONCURSO";
  subcategory?: string; // 'CNU', 'PRIMEIRA_FASE', etc
  year?: number[];
  difficulty?: ("FACIL" | "MEDIO" | "DIFICIL")[];
  subject_area?: string[];
  legal_branch?: string[]; // Para OAB
  exam_phase?: "PRIMEIRA" | "SEGUNDA"; // Para OAB
  type?: ("OBJETIVA" | "DISCURSIVA" | "PECA_PRATICA")[];
  institution?: string[];
  position?: string[];
  education_level?: "MEDIO" | "SUPERIOR";
  favorites_only?: boolean;
  never_answered?: boolean;
  user_correct?: boolean;
  user_incorrect?: boolean;
  min_error_rate?: number; // Filtro de erro m√≠nimo %
  page?: number;
  limit?: number;
}

// GET /api/questions/stats - Estat√≠sticas globais das quest√µes
interface QuestionStats {
  total_questions: number;
  total_responses: number;
  average_error_rate: number;
  by_category: Record<string, number>;
  by_difficulty: Record<string, number>;
}
```

## üìÖ Cronograma de Execu√ß√£o

### **Fase 1: Funda√ß√£o do Sistema (Semanas 1-2)** ‚úÖ **CONCLU√çDA**

#### **Database Engineer** - Design e Estrutura

- [x] **Semana 1**: Criar schema completo das quest√µes ‚úÖ
  - [x] Projetar tabelas `questions`, `question_options`, `user_question_stats` ‚úÖ
  - [x] Criar tabela `user_favorite_questions` ‚úÖ
  - [x] Definir √≠ndices para performance de filtros ‚úÖ
- [x] **Semana 2**: Implementar migrations e dados de exemplo ‚úÖ
  - [x] Criar migration `014_create_questions_system.sql` ‚úÖ
  - [x] Inserir dados de exemplo para cada categoria (ENEM, OAB, Concursos) ‚úÖ (`015_add_sample_questions.sql`)
  - [x] Otimizar queries com √≠ndices compostos ‚úÖ

**Entreg√°veis:** ‚úÖ **TODOS CONCLU√çDOS**

- [x] Schema completo de quest√µes ‚úÖ
- [x] Migration com dados de exemplo ‚úÖ
- [x] Documenta√ß√£o de √≠ndices e performance ‚úÖ

### **Fase 2: APIs e L√≥gica de Neg√≥cio (Semanas 3-4)** ‚úÖ **CONCLU√çDA**

#### **Backend Developer** - Desenvolvimento das APIs

- [x] **Semana 3**: APIs de quest√µes ‚úÖ
  - [x] Endpoint `GET /api/questions` com filtros avan√ßados ‚úÖ
  - [x] Endpoint `GET /api/questions/:id` para quest√£o espec√≠fica ‚úÖ
  - [x] Endpoint `POST /api/questions/:id/answer` para responder quest√£o ‚úÖ
- [x] **Semana 4**: APIs de estat√≠sticas e favoritos ‚úÖ
  - [x] Endpoint `GET /api/questions/stats` para estat√≠sticas globais ‚úÖ
  - [x] Endpoint `POST /api/questions/:id/favorite` para favoritar quest√£o ‚úÖ
  - [x] Endpoint `GET /api/users/question-history` para hist√≥rico do usu√°rio ‚úÖ
  - [x] Sistema de c√°lculo de taxa de erro din√¢mica ‚úÖ

**Entreg√°veis:** ‚úÖ **TODOS CONCLU√çDOS**

- [x] APIs RESTful completas com valida√ß√£o ‚úÖ (`backend/src/controllers/questionsController.js`)
- [x] Sistema de estat√≠sticas de erro em tempo real ‚úÖ (`question_error_rates` view)
- [x] Documenta√ß√£o da API com exemplos ‚úÖ

### **Fase 3: Interface e Experi√™ncia do Usu√°rio (Semanas 5-6)** ‚úÖ **CONCLU√çDA**

#### **Frontend Developer** - Interface de Filtros

- [x] **Semana 5**: Componentes de filtro ‚úÖ
  - [x] Componente `QuestionFilters` integrado com APIs ‚úÖ (modificado)
  - [x] Componente `QuestionCard` para exibir quest√µes ‚úÖ (existente, reutilizado)
  - [x] Componente `FilterChips` para mostrar filtros ativos ‚úÖ (existente)
  - [x] Hook `useQuestions` para gerenciar estado de quest√µes ‚úÖ (`src/hooks/useQuestions.ts`)
- [x] **Semana 6**: P√°gina de quest√µes completa ‚úÖ
  - [x] P√°gina `Questoes.tsx` com listagem e pagina√ß√£o ‚úÖ (integrada com API)
  - [x] Componente `QuestionDetail` para visualiza√ß√£o detalhada ‚úÖ (existente, `QuestionStats`)
  - [x] Sistema de favoritos integrado ‚úÖ
  - [x] Responsividade para mobile ‚úÖ (mantida do existente)

**Entreg√°veis:** ‚úÖ **TODOS CONCLU√çDOS**

- [x] Interface completa de filtros de quest√µes ‚úÖ (integra√ß√£o h√≠brida API + mock)
- [x] Experi√™ncia mobile-first responsiva ‚úÖ (mantida)
- [x] Integra√ß√£o com APIs do backend ‚úÖ (`useQuestions` hook)

### **Fase 4: Testes e Otimiza√ß√£o (Semanas 7-8)** ‚ö†Ô∏è **PARCIALMENTE CONCLU√çDA**

#### **QA Engineer** - Testes Automatizados

- [x] **Semana 7**: Testes de backend ‚úÖ **B√ÅSICOS REALIZADOS**
  - [x] Testes manuais para controllers de quest√µes ‚úÖ (validados via API calls)
  - [x] Testes de integra√ß√£o para APIs com filtros ‚úÖ (testados com curl/Postman)
  - [ ] **PENDENTE**: Testes unit√°rios automatizados com Jest ‚ö†Ô∏è
  - [ ] **PENDENTE**: Testes de performance para queries complexas ‚ö†Ô∏è

#### **Frontend Developer** + **QA Engineer** - Testes Frontend

- [x] **Semana 8**: Testes de frontend b√°sicos ‚úÖ
  - [x] Valida√ß√£o manual de componentes de filtro ‚úÖ
  - [x] Teste de integra√ß√£o frontend-backend ‚úÖ
  - [ ] **PENDENTE**: Testes automatizados com Jest/React Testing Library ‚ö†Ô∏è
  - [ ] **PENDENTE**: Testes end-to-end com Playwright/Cypress ‚ö†Ô∏è
  - [x] Performance b√°sica de carregamento validada ‚úÖ
  - [ ] **PENDENTE**: Cache inteligente de filtros ‚ö†Ô∏è

**Entreg√°veis:** ‚ö†Ô∏è **PARCIALMENTE CONCLU√çDOS**

- [ ] **PENDENTE**: Suite de testes automatizada completa (>90% cobertura) ‚ö†Ô∏è
- [x] Performance b√°sica otimizada (< 2s para carregar quest√µes) ‚úÖ
- [ ] **PENDENTE**: Documenta√ß√£o completa de uso para administradores ‚ö†Ô∏è

## üîß Especifica√ß√µes T√©cnicas

### **Filtros por Categoria**

#### **ENEM**

```typescript
interface ENEMFilters {
  category: "ENEM";
  year: number[]; // 2009-2024
  difficulty: ("FACIL" | "MEDIO" | "DIFICIL")[];
  subject_area: string[]; // Matem√°tica, Linguagens, etc.
  favorites_only: boolean;
  never_answered: boolean;
  min_error_rate: number; // 0-100%
}
```

#### **OAB**

```typescript
interface OABFilters {
  category: "OAB";
  year: number[];
  type: ("OBJETIVA" | "DISCURSIVA" | "PECA_PRATICA")[];
  difficulty: ("FACIL" | "MEDIO" | "DIFICIL")[];
  exam_phase: "PRIMEIRA" | "SEGUNDA";
  legal_branch: string[]; // Civil, Penal, Trabalhista, etc.
  piece_type?: "PROCESSUAL" | "DISCURSIVA"; // Para pe√ßas
  favorites_only: boolean;
  never_answered: boolean;
  user_correct: boolean; // Quest√µes que o usu√°rio acertou
  user_incorrect: boolean; // Quest√µes que o usu√°rio errou
  min_error_rate: number;
}
```

#### **Concursos**

```typescript
interface ConcursoFilters {
  category: "CONCURSO";
  subcategory: string; // 'CNU', 'INSS', etc.
  year: number[];
  type: ("OBJETIVA" | "DISCURSIVA" | "PECA_PRATICA")[];
  difficulty: ("FACIL" | "MEDIO" | "DIFICIL")[];
  institution: string[]; // 'Qualquer' ou espec√≠fica
  position: string[]; // Analista, T√©cnico, etc.
  education_level: "MEDIO" | "SUPERIOR";
  subject_area: string[];
  favorites_only: boolean;
  never_answered: boolean;
  avoid_repetitions: boolean; // Evitar quest√µes j√° respondidas
  min_error_rate: number;
}
```

### **Sistema de Taxa de Erro**

```sql
-- View para calcular taxa de erro por quest√£o
CREATE VIEW question_error_rates AS
SELECT
  q.id,
  q.title,
  COUNT(uqs.id) as total_responses,
  COUNT(CASE WHEN uqs.is_correct = false THEN 1 END) as incorrect_responses,
  CASE
    WHEN COUNT(uqs.id) > 0
    THEN (COUNT(CASE WHEN uqs.is_correct = false THEN 1 END) * 100.0) / COUNT(uqs.id)
    ELSE 0
  END as error_rate_percentage
FROM questions q
LEFT JOIN user_question_stats uqs ON q.id = uqs.question_id
GROUP BY q.id, q.title;
```

### **Performance e √çndices**

```sql
-- √çndices para filtros frequentes
CREATE INDEX idx_questions_category_year ON questions(category, year);
CREATE INDEX idx_questions_difficulty_subject ON questions(difficulty, subject_area);
CREATE INDEX idx_questions_category_phase ON questions(category, exam_phase)
WHERE category = 'OAB';

-- √çndice para estat√≠sticas de usu√°rio
CREATE INDEX idx_user_stats_user_correct ON user_question_stats(user_id, is_correct);

-- √çndice para favoritos
CREATE INDEX idx_favorites_user_created ON user_favorite_questions(user_id, created_at);
```

## üìä Interface de Usu√°rio

### **Layout de Filtros**

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ [ENEM] [OAB] [Concursos]                           üîç Busca ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ Filtros Ativos: [2023] [Matem√°tica] [√ó] [M√©dio] [√ó]        ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ ‚îå‚îÄ Ano ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îå‚îÄ Dificuldade ‚îÄ‚îê ‚îå‚îÄ √Årea ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îÇ
‚îÇ ‚îÇ ‚ñ° 2024       ‚îÇ ‚îÇ ‚òë F√°cil       ‚îÇ ‚îÇ ‚òë Matem√°tica        ‚îÇ  ‚îÇ
‚îÇ ‚îÇ ‚òë 2023       ‚îÇ ‚îÇ ‚òë M√©dio       ‚îÇ ‚îÇ ‚ñ° Linguagens        ‚îÇ  ‚îÇ
‚îÇ ‚îÇ ‚ñ° 2022       ‚îÇ ‚îÇ ‚ñ° Dif√≠cil     ‚îÇ ‚îÇ ‚ñ° Ci√™ncias Natureza ‚îÇ  ‚îÇ
‚îÇ ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ ‚ñ° Apenas Favoritas  ‚ñ° Nunca Respondidas  ‚ñ° Taxa erro > 20% ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ üìä Encontradas: 1,247 quest√µes | P√°gina 1 de 63            ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### **Card de Quest√£o**

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ üè∑Ô∏è ENEM 2023 ‚Ä¢ Matem√°tica ‚Ä¢ M√©dio        ‚≠ê üëÅÔ∏è üìä 30% erro ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ Uma empresa produz dois tipos de produtos A e B. O lucro... ‚îÇ
‚îÇ                                                             ‚îÇ
‚îÇ A) R$ 1.200,00                                             ‚îÇ
‚îÇ B) R$ 1.500,00                                             ‚îÇ
‚îÇ C) R$ 1.800,00                                             ‚îÇ
‚îÇ D) R$ 2.100,00                                             ‚îÇ
‚îÇ E) R$ 2.400,00                                             ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ [Ver Detalhes] [Responder] [Favoritar]                     ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

## üöÄ Crit√©rios de Sucesso

### **Performance**

- [ ] Carregamento de quest√µes em < 2 segundos
- [ ] Filtros respondem em < 500ms
- [ ] Suporte a 10,000+ quest√µes simult√¢neas

### **Funcionalidade**

- [ ] Todos os filtros especificados implementados
- [ ] Sistema de estat√≠sticas em tempo real
- [ ] Favoritos sincronizados entre dispositivos

### **Qualidade**

- [ ] Cobertura de testes > 90%
- [ ] Interface responsiva (mobile-first)
- [ ] Acessibilidade WCAG 2.1 AA

### **Dados**

- [ ] Base inicial de 500+ quest√µes por categoria
- [ ] Sistema de importa√ß√£o para administradores
- [ ] Backup autom√°tico de estat√≠sticas

## üìù Documenta√ß√£o de Entrega

### **Para Desenvolvedores**

- [ ] README com instru√ß√µes de setup
- [ ] Documenta√ß√£o da API com Swagger/OpenAPI
- [ ] Guia de contribui√ß√£o para novas quest√µes

### **Para Usu√°rios**

- [ ] Manual de uso dos filtros
- [ ] FAQ sobre crit√©rios de filtragem
- [ ] V√≠deo tutorial de 3 minutos

### **Para Administradores**

- [ ] Interface para inserir novas quest√µes
- [ ] Dashboard de estat√≠sticas de uso
- [ ] Ferramentas de modera√ß√£o de conte√∫do

## üìù Como Inserir Quest√µes no Sistema

### **Op√ß√£o 1: Via SQL Direto (Recomendado para Admin)**

```sql
-- 1. Inserir quest√£o principal
INSERT INTO questions (
  category, subcategory, title, content, type, year,
  difficulty, subject_area, legal_branch, exam_phase,
  institution, position, education_level, metadata
) VALUES (
  'ENEM', -- 'ENEM', 'OAB', 'CONCURSO'
  NULL,
  'T√≠tulo da Quest√£o',
  'Enunciado completo da quest√£o...',
  'OBJETIVA', -- 'OBJETIVA', 'DISCURSIVA', 'PECA_PRATICA'
  2024,
  'MEDIO', -- 'FACIL', 'MEDIO', 'DIFICIL'
  'Matem√°tica',
  NULL, -- Para OAB: 'Civil', 'Penal', etc.
  NULL, -- Para OAB: 'PRIMEIRA', 'SEGUNDA'
  'INEP', -- Institui√ß√£o/Banca
  NULL, -- Para concursos: cargo
  'MEDIO', -- 'MEDIO', 'SUPERIOR'
  '{"tema": "Fun√ß√µes", "competencia": 5}'::jsonb
) RETURNING id;

-- 2. Inserir alternativas (para quest√µes objetivas)
INSERT INTO question_options (question_id, option_letter, content, is_correct, explanation) VALUES
  ('question-id-aqui', 'A', 'Alternativa A', false, 'Explica√ß√£o da alternativa A'),
  ('question-id-aqui', 'B', 'Alternativa B', false, 'Explica√ß√£o da alternativa B'),
  ('question-id-aqui', 'C', 'Alternativa C', true, 'Explica√ß√£o da resposta correta'),
  ('question-id-aqui', 'D', 'Alternativa D', false, 'Explica√ß√£o da alternativa D'),
  ('question-id-aqui', 'E', 'Alternativa E', false, 'Explica√ß√£o da alternativa E');
```

### **Op√ß√£o 2: Via Script de Importa√ß√£o**

```bash
# No diret√≥rio backend
cd backend

# Criar arquivo CSV com as quest√µes
# Formato: category,title,content,type,year,difficulty,subject_area,option_a,option_b,option_c,option_d,option_e,correct_option

# Executar script de importa√ß√£o (a ser criado)
bun run import-questions data/questoes.csv
```

### **Op√ß√£o 3: Via API Admin (Futuro)**

```javascript
// POST /api/admin/questions
const questionData = {
  category: "ENEM",
  title: "T√≠tulo da Quest√£o",
  content: "Enunciado...",
  type: "OBJETIVA",
  year: 2024,
  difficulty: "MEDIO",
  subject_area: "Matem√°tica",
  options: [
    { letter: "A", content: "Alt A", correct: false },
    { letter: "B", content: "Alt B", correct: false },
    { letter: "C", content: "Alt C", correct: true },
    { letter: "D", content: "Alt D", correct: false },
    { letter: "E", content: "Alt E", correct: false },
  ],
};
```

### **Comandos √öteis para Administra√ß√£o**

```sql
-- Ver estat√≠sticas das quest√µes
SELECT
  category,
  COUNT(*) as total_questions,
  COUNT(DISTINCT year) as years_covered,
  MIN(year) as oldest_year,
  MAX(year) as newest_year
FROM questions
GROUP BY category;

-- Ver quest√µes sem respostas
SELECT q.id, q.title, q.category
FROM questions q
LEFT JOIN question_options qo ON q.id = qo.question_id
WHERE qo.id IS NULL AND q.type = 'OBJETIVA';

-- Backup das quest√µes
COPY questions TO '/backup/questions.csv' DELIMITER ',' CSV HEADER;
COPY question_options TO '/backup/options.csv' DELIMITER ',' CSV HEADER;
```

## üîÑ Pr√≥ximos Passos

1. **‚úÖ Fase 1-3 Completas**: Sistema base implementado
2. **‚ö†Ô∏è Fase 4 Pendente**: Testes automatizados e otimiza√ß√µes
3. **üìã Backlog**:
   - Interface administrativa para inser√ß√£o de quest√µes
   - Script de importa√ß√£o em lote
   - Dashboard de estat√≠sticas para admin
   - Testes automatizados completos

---

**Data de Cria√ß√£o:** Agosto 2025  
**Vers√£o:** 1.0  
**Status:** Aguardando Aprova√ß√£o

**Agentes Respons√°veis:**

- üìä Database Engineer: Schema e performance
- üîß Backend Developer: APIs e l√≥gica de neg√≥cio
- ‚öõÔ∏è Frontend Developer: Interface e experi√™ncia
- üß™ QA Engineer: Testes e qualidade
